{% load staticfiles %}
{% load cropping %}

<html>
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <meta name="author" content="Flavia Bernardes">
        <meta name="description" content="{% block description %}{% if page and not page.is_newsletter_confirmation_page %}{{ page.description }}{% else %}Check out artist Flavia Bernardes' website{% endif %}{% endblock %}">

        <!-- pinterest -->
        <meta name="p:domain_verify" content="0abc82f2a4e2d934f1b07766abce62ee"/>
        <!-- end pinterest -->

        <title>{% block title %}{% if page and not page.is_newsletter_confirmation_page %}{{ page.title }}{% else %}Flavia Bernardes Art{% endif %}{% endblock %}</title>
        <meta property="og:title" content="{% block ogtitle %}{% if page and not page.is_newsletter_confirmation_page %}{{ page.title }}{% else %}Flavia Bernardes Art{% endif %}{% endblock %}" />
        <meta property="og:description" content="{% block ogdescription %}{% if page and not page.is_newsletter_confirmation_page %}{{ page.description }}{% else %}Check out artist Flavia Bernardes' website{% endif %}{% endblock %}" />
        <meta property="og:type" content="{% block ogtype %}website{% endblock %}" />
        <meta property="og:url" content="http://www.flaviabernardesart.com{% block ogurl %}{% if page and not page.is_newsletter_confirmation_page %}{{ page.get_absolute_url }}{% else %}/{% endif %}{% endblock %}" />
        <meta property="og:image" content="http://www.flaviabernardesart.com{% block ogimage %}{% if page and page.social %}{% cropped_thumbnail page 'social' scale=1 %}{% else %}{% static 'img/amelie125x125.jpg' %}{% endif %}{% endblock %}" />

        <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" />

        <link href="{% static 'css/jquery.bxslider.css' %}" rel="stylesheet" />
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />
        <link href="{% static 'css/social.css' %}" rel="stylesheet" />
        <link href="{% static 'css/base.css' %}?v=0.0.2" rel="stylesheet" />
        <link href="{% static 'css/ajaxloader.css' %}" rel="stylesheet" />
        <link href="{% static 'css/newsletter.css' %}" rel="stylesheet" />
        <link href="{% static 'css/topbar.css' %}" rel="stylesheet" />
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <!-- jQuery library (served from Google) -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
        <script src="{% static 'js/jquery.bxslider.js' %}"></script>
        <script src="{% static 'js/jquery.cookie.js' %}"></script>
        <script src="{% static 'js/ajaxloader.js' %}"></script>
        <script src="{% static 'js/parallax.js' %}"></script>
        <script src="{% static 'js/fixatscroll.js' %}"></script>

        <script type="text/javascript">var switchTo5x=true;</script>
        <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
        <script type="text/javascript">stLight.options({publisher: "023fcf4a-4582-470d-8c44-a22303a1ce96", doNotHash: true, doNotCopy: false, hashAddressBar: false});</script>

        <script async defer data-pin-hover="true" data-pin-tall="true" src="//assets.pinterest.com/js/pinit.js"></script>

        {% autoescape off %}
            {{ global_settings.javascript_codes|default:"" }}
        {% endautoescape %}

        {% if page.show_footer and page.show_header or not page %}
            {% autoescape off %}
                {{ global_settings.javascript_codes_ignore_landing_pages|default:"" }}
            {% endautoescape %}
        {% endif %}

        {% block extrajs %}{% endblock %}

        <style>
            .site-middle-background input {
                background: transparent;
                color: {{ page.foreground_color }} !important;
                font-weight: normal;
                border: 1px solid;
            }

            .site-middle-background button {
                background: {{page.button_bg_rgba}};
                border: 1px solid;
            }

            .site-middle-background .newsletter button:hover {
                color: {{page.placeholder_foreground}};
                border-color: {{page.placeholder_foreground}};
            }

            .site-middle-background ::-webkit-input-placeholder {
                color: {{page.placeholder_foreground}} !important;
            }

            .site-middle-background :-moz-placeholder {
                color: {{page.placeholder_foreground}} !important;
                opacity: 1;
            }

            .site-middle-background ::-moz-placeholder {
                color: {{page.placeholder_foreground}} !important;
                opacity: 1;
            }

            .site-middle-background :-ms-input-placeholder {
                color: {{page.placeholder_foreground}} !important;
            }

            .site-middle-background ul.errorlist li {
                color: #660000;
                font-weight: normal;
                background-color: {{page.error_bg_rgba}};
                padding: 0 10px !important;
                line-height: 30px;
            }
            #landing-page-block {
                background-color: {{page.box_background_color_rgba}};
                padding-top: 30px;
                padding-bottom: 30px;
            }
            #landing-page-block.square {
                max-width: 1020px;
                margin: 0 auto;
                padding-left: 30px;
                padding-right: 30px;
            }
            .background-cover {
                color: {{ page.foreground_color }};
            }
        </style>
        {% block extrastyle %}{% endblock %}

        <!-- Facebook Pixel Code -->
        <script>
            !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
            n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','//connect.facebook.net/en_US/fbevents.js');

            fbq('init', '229568790717139');
            fbq('track', "PageView");
        </script>
        <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=229568790717139&ev=PageView&noscript=1"/></noscript>
        <!-- End Facebook Pixel Code -->

    </head>
    <body>
        <div id="cover">
            <img src="{% static 'img/ajax-loader.png' %}" class="ajax-loader">
        </div>
        {% block site %}
            <div id="body" {% if page.background_cover_image %}class="background-cover" style="background-image: url({% cropped_thumbnail page 'background_cover' scale=1 %});"{% endif %}>
                {% if page.show_header or not page %}
                    <section id="header" {% if not enable_top_bar %}class="no-topbar"{% endif %}>

                        {% if enable_top_bar %}
                            <div id="top-bar">
                                <div class="top-bar-close">
                                    x
                                </div>
                                <div class="center-column newsletter-wrap">
                                    <div class="topbar-description">
                                        {{ global_settings.top_sign_up_title }}
                                    </div>
                                    <div style="float: right;">
                                        <form id="top-newsletter" class="newsletter" action="{% url 'newsletter' %}" method="post">
                                            {% with global_settings.top_newsletter as newsletter %}
                                                {% include "newsletter/line_form.html"  %}
                                            {% endwith %}
                                        </form>
                                    </div>
                                </div>
                                <div class="clear"></div>
                            </div>
                        {% endif %}

                        <div class="center-column">
                            <div id="logo">
                                {% block logo %}
                                    <img src="{% static 'img/logo-small-bw.png' %}" style="width: 320px;" />
                                {% endblock %}
                            </div>
                            <div class="transp transp-top">
                                {% include "top-menu.html" %}
                                <script>
                                    $('.item').mouseover(function () {
                                        $(this).find('.sub-menu').css('transform', 'scale(1, 1)');
                                    });
                                    $('.item').mouseout(function () {
                                        if ($(window).width() <= 1000) return;
                                        $(this).find('.sub-menu').css('transform', 'scale(1, 0)');
                                    });
                                </script>


                                <a id="menu-toggle" href="javascript:;" class="btn btn-dark btn-lg toggle">
                                    <i class="fa fa-1x fa-bars"></i>
                                </a>
                                <script>
                                    $('#menu-toggle').click(function () {
                                        if ($("#menu").is(':hidden')) {
                                            $("#menu").slideDown();
                                        } else {
                                            $("#menu").slideUp();
                                        }
                                    });
                                </script>

                            </div>

                        </div>
                    </section>
                {% endif %}
                {% if page.show_header %}
                    <div class="after-header"></div>
                {% endif %}
                {% if enable_top_bar and page.show_header %}
                    <div class="after-header-topbar"></div>
                {% endif %}
                
                {% if page and page.banner1 and page.show_banner or user.is_authenticated and user.is_superuser %}
                    <div class="site-top">
                        {% block container-top %}
                            {% if page and page.banner1 and page.show_banner %}
                                <div class="parallax banner" bg-size="1920x600"
                                     style="background-image: url({% cropped_thumbnail page 'banner1' scale=1 %}); position: relative;">
                                    <div class="center-column">
                                    </div>
                                    <div class="banner-title">
                                        {{ page.title }}
                                    </div>
                            {% else %}
                                    <div class="" style="min-height: 50px; position: relative;">
                            {% endif %}
                                    {% block cms_actions %}
                                        {% if user.is_authenticated and user.is_superuser %}
                                            <script src="{% static 'js/admin/cmsobjectlist.js' %}"></script>
                                            <p id="preview-actions">
                                                <button id="modify-page" class="yellow">
                                                    MODIFY
                                                </button>
                                            </p>
                                            <script>
                                                $("#modify-page").click(function () {
                                                    newDraft('cms', 'page', 'pagedraft', {{ page.id }});
                                                });
                                            </script>
                                        {% endif %}
                                    {% endblock %}
                                </div>
                        {% endblock %}
                    </div>
                {% endif %}

                {# START OF LANDING PAGE BLOCK #}
                <div {% if page.background_cover_image %} id="landing-page-block" {% endif %} {% if page.background_cover_image and page.box_square %}class="square"{% endif %}>
                    {% block content1 %}
                        {% if page and page.content1 %}
                            <div class="center-column page-content1">
                                {% autoescape off %}
                                    {{ page.content1 }}
                                {% endautoescape %}
                            </div>
                        {% endif %}
                    {% endblock %}

                    <div class="container-large">
                        {% block container-large %}
                        {% endblock %}
                    </div>

                    <div class="center-column">
                        <section class="container-main">
                            {% block container %}
                            {% endblock %}
                            <div class="clear"></div>
                        </section>
                        <div class="clear"></div>
                    </div>

                    {% block content2 %}
                        {% if page and page.content2 %}
                            <div class="center-column page-content2">
                                {% autoescape off %}
                                    {{ page.content2 }}
                                {% endautoescape %}
                            </div>
                        {% endif %}
                    {% endblock %}

                    <div>
                        {% block banner2 %}
                            {% if page and page.image_banner2 %}
                                <div class="parallax banner banner2" bg-size="1920x600"
                                     style="background-image: url({% cropped_thumbnail page 'banner2' scale=1 %});">
                                    <div class="center-column">
                                    </div>
                                </div>
                            {% endif %}
                        {% endblock %}
                    </div>

                    {% block content3 %}
                        {% if page and page.content3 %}
                            <div class="center-column page-content3">
                                {% autoescape off %}
                                    {{ page.content3 }}
                                {% endautoescape %}
                            </div>
                        {% endif %}
                    {% endblock %}

                    <div id="site-middle-anchor"></div>
                    {% if not page or page and not page.is_newsletter_confirmation_page %}
                        <div class="newsletter-holder site-middle scroll-fixed {% if page.background_cover_image %}site-middle-background{% endif %}" fixat="75" anchor="site-middle-anchor">
                            <div class="center-column">
                                {% block container-middle %}
                                    <section class="container-middle">
                                        <div class="newsletter-wrap">
                                            {% if page.background_cover_image and page.newsletter.sign_up_title.strip or not page.background_cover_image %}
                                                <p class="center">
                                                    {% block newsletter_description %}
                                                        {% if page and page.newsletter and page.newsletter.sign_up_title %}
                                                            {{ page.newsletter.sign_up_title }}
                                                        {% else %}
                                                            {% if default_newsletter_list %}
                                                                {{ default_newsletter_list.sign_up_title }}
                                                            {% else %}
                                                                Want an exclusive artwork wallpaper? Add your name and email below
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endblock %}
                                                </p>
                                            {% endif %}
                                            <form id="newsletter" class="newsletter" action="{% url 'newsletter' %}" method="post">
                                                {% with page.newsletter as newsletter %}
                                                    {% include "newsletter/line_form.html"  %}
                                                {% endwith %}
                                            </form>
                                        </div>
                                        <div class="clear"></div>
                                        <script src="{% static 'js/jquery.form.min.js' %}"></script>
                                        <script src="{% static 'js/newsletter.js' %}"></script>
                                    </section>
                                {% endblock %}
                            </div>
                        </div>
                    {% endif %}

                    {% block content4 %}
                        {% if page and page.content4 %}
                            <div class="center-column page-content3">
                                {% autoescape off %}
                                    {{ page.content4 }}
                                {% endautoescape %}
                            </div>
                        {% endif %}
                    {% endblock %}

                </div>
                {# END OF LANDING PAGE BLOCK #}

                {% if page.show_footer or not page %}

                    <div class="center-column">
                        <section class="container-bottom">
                            {% include "share.html"  %}
                            <div class="clear"></div>
                            <br>
                            <p class="center">
                                Feel free to share my work and photos with credit.
                                All artwork and images of artwork are the sole property
                                of Flavia Bernardes and may not be used or reproduced in
                                any way for profit without permission. If you have any
                                queries, please check my <a href="/artworks/faq/">FAQ page</a> for more information.
                            </p>
                            <br><br>
                            {% block container-bottom %}
                            {% endblock %}
                            <div class="clear"></div>
                        </section>
                        <div class="clear"></div>
                    </div>

                    <div class="clear"></div>
                    <div style="height: 60px;"></div>
                    <div class="clear"></div>

                    <section id="footer">
                        <div class="content">
                            {% with '32' as size %}
                                <div class="footer-social">{% include "social.html" %}</div>
                            {% endwith %}
                            <div class="copyright">&#9400 Flavia Bernardes, 2016. All rights reserved.</div>
                            <div class="footer-submenu">
                                <span class="first-pipe">|</span>
                                {% for page in footer_pages %}
                                    <a href="{{ page.get_absolute_url }}">{{ page }}</a>{% if not forloop.last %} |{% endif %}
                                {% endfor %}
                            </div>
                            <div class="clear"></div>
                        </div>
                    </section>
                {% endif %}
            </div>
        {% endblock %}

        <script>

            $('#top-bar .top-bar-close').click(function () {
                $('#top-bar').slideUp();
                $('.after-header-topbar').slideUp({progress: function () {
                    $(window).scroll();
                }});
                $('#header').addClass('no-topbar');
                $.ajax({
                    url: '{% url 'close_top_bar' %}',
                    type: 'post',
                    dataType: 'json',
                    success: function (data) {
                        console.log(data);
                    }
                });
            });

            function toSlug(str) {
                return str.toLowerCase().replace(/ /g,'-').replace(/[^\w-]+/g,'');
            }

            $('ol').each(function (i) {
                var $next = $(this).next();
                if ($next.prop('tagName').toLowerCase() == 'ul') {
                    var slug = toSlug($(this).find('p').text()) + i;
                    $next.hide();
                    $(this).attr('for', slug);
                    $(this).addClass('dynamic-accordion');
                    $next.prop('id', slug);
                    //$next.css('list-style', 'none');
                }
            });

            $('.dynamic-accordion').click(function () {
                var id = $(this).attr('for');
                var $el = $('#' + id);
                if ($el.is(':hidden')) {
                    $el.slideDown();
                    $(this).addClass('active');
                } else {
                    $el.slideUp();
                    $(this).removeClass('active');
                }
            });

            /*****    GOOGLE ANALYTICS    *****/
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-60830121-1', 'auto');
            ga('send', 'pageview');
            /*****    END GOOGLE ANALYTICS    *****/

            $(window).ready(function () {
                if ($.browser.chrome) {
                    //$("#logo-home").css("margin", "-10px auto 28px auto");
                }
                $('#logo').click(function () {
                    window.location.replace('{% url 'home' %}');
                });
            });
        </script>

        {% block bottomjs %}
        {% endblock %}
    </body>
</html>
