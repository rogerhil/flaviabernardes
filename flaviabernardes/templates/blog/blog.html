{% extends 'base.html' %}
{% load staticfiles %}
{% load cropping %}

{% block title %}Flavia Bernardes Art | Blog{% endblock %}
{% block ogtitle %}Flavia Bernardes Art | Blog{% endblock %}
{% block ogdescription %}Check out artist Flavia Bernardes' blog posts{% endblock %}
{% block ogurl %}{% url 'blog' %}{% endblock %}
{% if posts_list.count %}
    {# {% block ogimage %}{% cropped_thumbnail posts_list.0 'listing' scale=1 %}{% endblock %} #}
{% endif %}

{% block extrastyle %}

{% endblock %}

{% block container-large %}
    <div id="">
        {% comment %}
        <ul>
            {% for post in posts_list %}
                <li class="{% cycle '' '' '' %}">
                    <a href="{% url 'blog_post_view' post.slug %}">
                        <p>
                            <strong>{{ post.title }}</strong><br>
                            {% autoescape off %}
                                {{ post.listing_summary }}
                            {% endautoescape %}
                        </p>
                        <span></span>
                        <img src="{% cropped_thumbnail post 'listing' scale=1 %}" />
                    </a>
                </li>
            {% endfor %}
            {% if user.is_authenticated and user.is_superuser %}
                <li class="{% cycle '' '' '' %}" style="border: 2px dashed #f66;">
                    <button id="modify-post" class="pink" style="margin: 130px 0 0 38px;">
                        ADD NEW DRAFT POST
                    </button>
                    <script>
                        $("#modify-post").click(function () {
                            window.location = '/admin/blog/draft/add/';
                        });
                    </script>
                </li>
            {% endif %}
        </ul>
        {% endcomment %}

        <div id="posts">
            {% for post in posts_list %}
                <a href="{% url 'blog_post_view' post.slug %}">
                    <div class="grid post {% cycle 'halfleft' 'halfright' '' %}">
                        <figure class="effect-lily" style="background: url({% if forloop.counter0|add:1|divisibleby:3 %}{% cropped_thumbnail post 'listing' scale=1 %}{% else %}{% cropped_thumbnail post 'listing_half' scale=1 %}{% endif %});">
                            <div class="dark">
                                <figcaption>
                                    <div class="description">
                                        <h2>{{ post.title }}</h2><br>
                                        <p style="text-transform: none;">
                                            {% autoescape off %}
                                                {{ post.text|truncatewords:30 }}
                                            {% endautoescape %}
                                        </p><br>
                                        <p style="text-transform: none; font-style: italic;">
                                            Published on {{ post.created|date }} by Flavia Bernardes
                                        </p>
                                    </div>
                                </figcaption>
                            </div>
                        </figure>
                    </div>
                </a>
            {% endfor %}



            <div class="grid post halfright" style="">
                <figure class="effect-lily" style="background: url({% static 'img/mars-half.jpg' %});">
                    <div class="dark">
                        <figcaption>
                            <div class="description">
                                <button id="modify-post" class="pink" style="margin-left: 50px;">
                                    ADD NEW DRAFT POST
                                </button>
                            </div>
                        </figcaption>
                    </div>
                </figure>
            </div>
            <script>
                $("#modify-post").click(function () {
                    window.location = '/admin/blog/draft/add/';
                });
            </script>

        </div>

    </div>
    <div class="clear"></div>
{% endblock %}
